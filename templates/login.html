<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>—Å–∫–∞M - –í—Ö–æ–¥</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="{{ 'dark-theme' if session.get('dark_theme') else '' }}">
    
    <div class="theme-toggle">
        <label class="theme-switch">
            <input type="checkbox" id="themeCheckbox" {{ 'checked' if session.get('dark_theme') else '' }}>
            <span class="slider">
                <div class="theme-icons">
                    <span class="theme-icon sun">‚òÄÔ∏è</span>
                    <span class="theme-icon moon">üåô</span>
                </div>
            </span>
        </label>
    </div>

    <div class="container">
        <header>
            <h1>—Å–∫–∞M - –í—Ö–æ–¥</h1>
        </header>
        
        <form method="POST" class="auth-form">
            <div class="form-group">
                <label for="username">–Æ–∑–µ—Ä–Ω–µ–π–º:</label>
                <input type="text" id="username" name="username" required>
            </div>
            
            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password" name="password" required>
            </div>
            
            <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
        </form>
        
        <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{{ url_for('register') }}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    <script>
        document.getElementById('themeCheckbox').addEventListener('change', function() {
            fetch('/toggle_theme', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({dark_theme: this.checked})
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    location.reload();
                }
            });
        });
    </script>
</body>
</html>